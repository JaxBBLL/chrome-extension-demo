const h=function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))m(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&m(l)}).observe(document,{childList:!0,subtree:!0});function s(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerpolicy&&(o.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?o.credentials="include":t.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function m(t){if(t.ep)return;t.ep=!0;const o=s(t);fetch(t.href,o)}};h();var d=document.getElementById("btn-start"),u=document.getElementById("btn-close"),c=document.getElementById("container"),S=document.querySelector(".header"),r=c.querySelector(".login-status"),n=c.querySelector(".sync-status"),f=c.querySelector(".input"),L=c.querySelector(".update-btn"),y=c.querySelector(".sync-time");chrome.runtime.sendMessage({from:"popup",type:"LOGIN_CHECK"},e=>{console.log("LOGIN_CHECK",e)});d.addEventListener("click",()=>{d.setAttribute("disabled","disabled"),chrome.runtime.sendMessage({from:"popup",type:"SYNC_START"},function(e){a(),d.removeAttribute("disabled")})});u.addEventListener("click",()=>{u.setAttribute("disabled","disabled"),chrome.runtime.sendMessage({from:"popup",type:"SYNC_CLOSE"},function(e){u.removeAttribute("disabled")})});S.addEventListener("click",()=>{chrome.tabs.create({url:"https://b2bservice.baidu.com"})});L.addEventListener("click",()=>{chrome.storage.local.set({host:f.value}),a(),chrome.notifications.clear("notify2"),chrome.notifications.create("notify2",{type:"basic",title:"\u63D0\u793A",message:"\u66F4\u65B0\u6210\u529F",iconUrl:"images/logo.png",requireInteraction:!1}),chrome.runtime.sendMessage({from:"popup",type:"SYNC_START"},function(e){console.log(e)})});chrome.runtime.onMessage.addListener((e,i,s)=>(console.log("popup",e),e.type=="SYNC_END"?s({type:e.type,message:"\u64CD\u4F5C\u6210\u529F"}):e.type=="SYNC_SUCCESS"?(y.textContent=e.data,s({type:e.type,message:"\u64CD\u4F5C\u6210\u529F"})):s({type:e.type,message:"\u672A\u77E5\u64CD\u4F5C"}),!0));chrome.storage.onChanged.addListener(function(e,i){for(key in e){var s=e[key];key=="isSync"?g(s.newValue):key=="isLogin"?p(s.newValue):key=="host"&&a()}});chrome.storage.local.get("isSync",e=>{g(e.isSync)});chrome.storage.local.get("isLogin",e=>{p(e.isLogin)});chrome.storage.local.get("time",e=>{y.textContent=e.time||""});a();function a(){chrome.storage.local.get("host",e=>{f.value=e.host||""})}function p(e){e==1?(r.classList.remove("dot-error"),r.classList.add("dot","dot-success"),r.textContent="\u662F"):e==0&&(r.classList.remove("dot-success"),r.classList.add("dot","dot-error"),r.textContent="\u5426")}function g(e){e==1?(n.classList.remove("dot-error"),n.classList.add("dot","dot-success"),n.textContent="\u5F00\u542F"):e==0&&(n.classList.remove("dot-success"),n.classList.add("dot","dot-error"),n.textContent="\u5173\u95ED")}
